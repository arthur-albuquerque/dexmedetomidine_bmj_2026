<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dexmedetomidine Evidence Atlas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Source+Serif+4:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero" aria-label="Review header">
        <div class="hero-main">
          <div class="hero-topline">
            <p class="kicker">Clinical Evidence Dashboard</p>
            <button id="theme-toggle" class="theme-btn" type="button" aria-label="Toggle dark mode">Dark mode</button>
          </div>
          <h1>Dexmedetomidine Dosing and Timing in Postoperative Delirium Prevention</h1>
          <p class="subtitle">
            Designed for rapid clinical interpretation of how dexmedetomidine was administered across eligible trials.
          </p>
          <p class="scope-pill">Included comparisons: Dexmedetomidine versus placebo or saline</p>
          <p class="citation">
            Source review: <em>Effectiveness of drug interventions to prevent delirium after surgery for older adults: systematic review and network meta-analysis of randomised controlled trials</em>.<br />
            Luney et al., 2026. DOI: 10.1136/bmj-2025-085539
            (<a href="https://www.bmj.com/content/392/bmj-2025-085539" target="_blank" rel="noopener noreferrer">BMJ article page</a>)
          </p>
        </div>

        <div class="hero-stats" aria-label="Summary statistics">
          <article class="stat-card">
            <span id="trials-total" class="stat-value">-</span>
            <span class="stat-label">Filtered Trials</span>
          </article>
          <article class="stat-card accent-pre">
            <span id="trials-pre" class="stat-value">-</span>
            <span class="stat-label">Pre-operatively</span>
          </article>
          <article class="stat-card accent-intra">
            <span id="trials-intra" class="stat-value">-</span>
            <span class="stat-label">Intra-operatively</span>
          </article>
          <article class="stat-card accent-post">
            <span id="trials-post" class="stat-value">-</span>
            <span class="stat-label">Post-operatively</span>
          </article>
          <article class="stat-card context-card">
            <span id="participants-total" class="stat-value">-</span>
            <span class="stat-label">Participants</span>
          </article>
        </div>
      </header>

      <section class="panel intro-panel" aria-label="Interpretation guidance">
        <h2>How to Read This Page</h2>
        <p>
          The charts display <strong>number of trials</strong>. Use timing filters to isolate when dexmedetomidine was given:
          <strong>Pre-operatively</strong>, <strong>Intra-operatively</strong>, or <strong>Post-operatively</strong>.
        </p>
      </section>

      <section class="panel" id="filters-panel" aria-label="Filters">
        <div class="panel-head">
          <h2>Filter Trials</h2>
          <button id="reset-filters" class="secondary-btn" type="button">Clear all filters</button>
        </div>
        <p class="filter-note">You can select multiple categories in each filter.</p>

        <div class="filters-grid">
          <div class="filter-field">
            <span class="filter-label">Risk of Bias (overall)</span>
            <details class="filter-popover" id="rob-filter">
              <summary class="popover-trigger">All risk categories</summary>
              <div class="popover-menu"></div>
            </details>
          </div>

          <div class="filter-field">
            <span class="filter-label">Timing of intervention</span>
            <details class="filter-popover" id="timing-filter">
              <summary class="popover-trigger">All timing categories</summary>
              <div class="popover-menu"></div>
            </details>
          </div>

          <div class="filter-field">
            <span class="filter-label">Route</span>
            <details class="filter-popover" id="route-filter">
              <summary class="popover-trigger">All routes</summary>
              <div class="popover-menu"></div>
            </details>
          </div>

          <div class="filter-field">
            <span class="filter-label">Infusion dose band</span>
            <details class="filter-popover" id="dose-filter">
              <summary class="popover-trigger">All dose bands</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
        </div>
      </section>

      <section class="panel chart-grid" aria-label="Dose and timing charts">
        <article>
          <h2>Infusion Dose Bands</h2>
          <div id="dose-chart" class="chart"></div>
        </article>

        <article>
          <h2>Timing of Dexmedetomidine Administration</h2>
          <div id="timing-chart" class="chart"></div>
        </article>
      </section>

      <section class="panel" aria-label="Trial table">
        <h2>Trial-Level Details</h2>
        <p class="filter-note">You can select multiple categories in each table filter.</p>

        <div class="table-filters-grid">
          <div class="filter-field">
            <span class="filter-label">Study</span>
            <details class="filter-popover" id="tbl-filter-study">
              <summary class="popover-trigger">All studies</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
          <div class="filter-field">
            <span class="filter-label">Country</span>
            <details class="filter-popover" id="tbl-filter-country">
              <summary class="popover-trigger">All countries</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
          <div class="filter-field">
            <span class="filter-label">Risk of Bias</span>
            <details class="filter-popover" id="tbl-filter-rob">
              <summary class="popover-trigger">All risk categories</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
          <div class="filter-field">
            <span class="filter-label">Bolus</span>
            <details class="filter-popover" id="tbl-filter-bolus">
              <summary class="popover-trigger">All bolus values</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
          <div class="filter-field">
            <span class="filter-label">Infusion</span>
            <details class="filter-popover" id="tbl-filter-infusion">
              <summary class="popover-trigger">All infusion values</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
          <div class="filter-field">
            <span class="filter-label">Timing</span>
            <details class="filter-popover" id="tbl-filter-timing">
              <summary class="popover-trigger">All timing categories</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
          <div class="filter-field">
            <span class="filter-label">Route</span>
            <details class="filter-popover" id="tbl-filter-route">
              <summary class="popover-trigger">All routes</summary>
              <div class="popover-menu"></div>
            </details>
          </div>
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Study</th>
                <th>Country</th>
                <th>Risk of Bias</th>
                <th>Bolus</th>
                <th>Infusion</th>
                <th>Timing of intervention</th>
                <th>Route</th>
              </tr>
            </thead>
            <tbody id="trials-body"></tbody>
          </table>
        </div>
      </section>

      <footer class="app-footer" aria-label="App attribution">
        <p>This app was built by Arthur M. Albuquerque, MD, using GPT-5.3-Codex.</p>
        <p class="source-line">
          Source code:
          <a
            class="source-link"
            href="https://github.com/arthur-albuquerque/dexmedetomidine_bmj_2026"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="View source code on GitHub"
          >
            <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
              <path
                fill="currentColor"
                d="M8 0C3.58 0 0 3.58 0 8a8 8 0 0 0 5.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49C3.78 14.2 3.31 12.73 3.31 12.73c-.36-.92-.88-1.16-.88-1.16-.72-.5.06-.49.06-.49.79.06 1.21.82 1.21.82.71 1.2 1.87.86 2.33.66.07-.52.28-.86.5-1.06-1.78-.2-3.64-.89-3.64-3.95 0-.88.31-1.59.82-2.16-.08-.2-.36-1.02.08-2.12 0 0 .67-.22 2.2.82A7.5 7.5 0 0 1 8 3.8c.68 0 1.37.09 2.01.26 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.57.82 1.28.82 2.16 0 3.07-1.87 3.75-3.65 3.95.29.25.54.74.54 1.49 0 1.08-.01 1.95-.01 2.21 0 .21.14.46.55.38A8 8 0 0 0 16 8c0-4.42-3.58-8-8-8Z"
              />
            </svg>
          </a>
        </p>
      </footer>
    </main>

    <script type="module" src="./app.js?v=20260213-8"></script>
  </body>
</html>
